<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Digital Signature verifier for admissions office, Ibadan City Polytechnic</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; background-color: #f0f4f8; }
    /* Scanning overlay animation */
    @keyframes scan-slide {
      0% { transform: translateX(-110%); }
      100% { transform: translateX(110%); }
    }
    .scan-overlay {
      position: absolute;
      inset: 0;
      pointer-events: none;
      background: linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.25) 45%, rgba(255,255,255,0.6) 50%, rgba(255,255,255,0.25) 55%, rgba(255,255,255,0) 100%);
      mix-blend-mode: screen;
      opacity: 0.95;
      overflow: hidden;
    }
    .scan-overlay .scan-line {
      position: absolute;
      top: 0; bottom: 0; width: 30%;
      background: linear-gradient(180deg, rgba(255,255,255,0) 0%, rgba(99,102,241,0.12) 50%, rgba(255,255,255,0) 100%);
      transform: translateX(-110%);
      animation: scan-slide 1.2s linear infinite;
    }
    /* Small scan icon that moves with the scan line */
    .scan-overlay .scan-icon {
      position: absolute;
      top: 50%;
      left: 0;
      transform: translate(-50%, -50%);
      width: 28px;
      height: 28px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(255,255,255,0.9);
      border-radius: 9999px;
      box-shadow: 0 4px 10px rgba(2,6,23,0.12);
      animation: scan-slide 1.2s linear infinite;
    }
  .scan-overlay .scan-icon svg { width: 16px; height: 16px; color: #002D62; }
    .preview-wrapper { position: relative; }
  </style>
</head>
<body class="p-6 md:p-10">

  <!-- Top header with user info and logout -->
  <header class="max-w-6xl mx-auto flex flex-col md:flex-row items-center md:items-start justify-between mb-8 gap-4 md:gap-0 px-4 md:px-0">
    <div class="flex flex-col md:flex-row items-center md:items-start space-y-2 md:space-y-0 md:space-x-4 text-center md:text-left w-full md:w-auto">
      <img src="img/icplogo.png" alt="Icplogo" class="h-14 w-14 object-contain mx-auto md:mx-0">
      <div>
        <h2 class="text-xl sm:text-2xl md:text-3xl font-extrabold text-[#002D62]">Digital Signature verifier for admissions office</h2>
        <p class="text-sm text-[#4b5563] mt-0">Ibadan City Polytechnic — Forensic-level signature comparison</p>
      </div>
    </div>
    <div class="flex items-center space-x-3 w-full md:w-auto justify-center md:justify-end">
      <div class="text-sm text-[#002D62] truncate">Signed in as <span id="userEmail" class="font-semibold"></span></div>
      <button id="aboutBtn" class="px-3 py-2 border border-[#002D62] text-[#002D62] rounded-md hover:bg-[#E9F0FA]">About</button>
      <button id="logoutBtn" class="px-3 py-2 bg-[#D4AF37] text-black rounded-md hover:opacity-90">Logout</button>
    </div>
  </header>

  <main class="max-w-6xl mx-auto space-y-8">

    <!-- Scanner UI (full width) -->
  <section class="bg-white p-4 md:p-10 rounded-2xl shadow-2xl border border-gray-200">

      <header class="text-center mb-6">
        <h1 class="text-2xl md:text-4xl font-extrabold text-gray-900 tracking-tight">Run AI Verification</h1>
        <p class="text-gray-600 mt-2">Upload a document with the signature and a clear authentic sample.</p>
      </header>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="bg-[#E9F0FA] p-4 rounded-xl border-2 border-[#cfe0f6]">
          <h3 class="text-[#002D62] font-bold mb-2">1. Document with Signature</h3>
          <input type="file" id="documentUpload" class="file-input" accept="image/*,.pdf">
          <label for="documentUpload" id="documentLabel" class="file-label bg-[#002D62] text-white inline-block mt-3 px-4 py-2 rounded-md cursor-pointer">Choose Document</label>
          <p id="docFilename" class="mt-2 text-sm text-gray-600 truncate">No file selected.</p>
          <p class="text-xs text-gray-500 mt-1">Tip: Click the document area and press Ctrl+V to paste an image from your clipboard.</p>
          <div class="mt-3 border-t pt-3 border-[#cfe0f6]">
            <div class="preview-wrapper">
              <img id="documentPreview" class="hidden w-full h-auto rounded-lg shadow-md max-h-40 sm:max-h-48 object-contain mx-auto" alt="Document Preview">
              <div id="documentScanOverlay" class="scan-overlay hidden">
                <div class="scan-line"></div>
                <div class="scan-icon" aria-hidden="true">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><circle cx="11" cy="11" r="6"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="bg-purple-50 p-4 rounded-xl border-2 border-purple-200">
          <h3 class="text-purple-800 font-bold mb-2">2. Authentic Signature Sample</h3>
          <input type="file" id="signatureUpload" class="file-input" accept="image/*">
          <label for="signatureUpload" id="signatureLabel" class="file-label bg-purple-600 text-white inline-block mt-3 px-4 py-2 rounded-md cursor-pointer">Choose Signature Sample</label>
          <p id="sigFilename" class="mt-2 text-sm text-gray-600 truncate">No file selected.</p>
          <p class="text-xs text-gray-500 mt-1">Tip: Click the signature area and press Ctrl+V to paste an image from your clipboard.</p>
          <div class="mt-3 border-t pt-3 border-purple-200">
            <div class="preview-wrapper">
              <img id="signaturePreview" class="hidden w-full h-auto rounded-lg shadow-md max-h-40 sm:max-h-48 object-contain mx-auto" alt="Signature Sample Preview">
              <div id="signatureScanOverlay" class="scan-overlay hidden">
                <div class="scan-line"></div>
                <div class="scan-icon" aria-hidden="true">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><circle cx="11" cy="11" r="6"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="mt-6 grid grid-cols-1 sm:grid-cols-2 gap-3">
        <button id="verifyButton" class="w-full px-4 py-2 md:px-6 md:py-3 bg-[#002D62] text-white font-bold rounded-xl disabled:opacity-50" disabled>Run AI Verification</button>
        <button id="reportButton" class="w-full px-4 py-2 md:px-6 md:py-3 bg-[#D4AF37] text-black font-bold rounded-xl disabled:opacity-50" disabled>Forensic Analysis Report</button>
      </div>

  <div id="resultBox" class="mt-6 p-4 md:p-6 rounded-xl border-4 border-dashed min-h-[120px] md:min-h-[140px] flex flex-col items-center justify-center bg-gray-50">
        <p id="resultText" class="text-lg font-semibold text-gray-500 text-center">Upload both files and click 'Run AI Verification' to begin.</p>

  <div id="confidenceDisplay" class="w-full mt-4 p-3 md:p-4 rounded-lg bg-white border border-gray-200 hidden">
          <div class="flex justify-between items-center mb-2">
            <p class="text-sm font-semibold text-gray-700">AI Confidence Score:</p>
            <p id="confidenceScoreText" class="text-lg font-bold text-gray-900">--</p>
          </div>
          <div class="confidence-bar h-3 rounded-full bg-gray-200 overflow-hidden">
            <div id="confidenceFill" class="confidence-fill h-3" style="width:0%"></div>
          </div>
          <p id="confidenceLabel" class="mt-2 text-xs text-center text-gray-500">Neutral</p>
        </div>
      </div>

      <div id="reportBox" class="mt-4 p-4 rounded-xl border-2 border-[#cfe0f6] bg-white hidden">
        <h3 class="text-[#002D62] font-bold mb-2">Forensic Analysis Report</h3>
        <p id="reportText" class="text-gray-700 text-sm italic">Report will appear here.</p>
      </div>


    </section>

    <!-- About modal (hidden by default) -->
  <div id="aboutModal" class="fixed inset-0 z-50 hidden flex items-center justify-center p-4">
      <!-- Backdrop -->
      <div id="aboutBackdrop" class="absolute inset-0 bg-black/40 backdrop-blur-sm"></div>

      <!-- Modal panel -->
      <div class="relative bg-white rounded-2xl shadow-xl max-w-lg w-[90%] p-4 md:p-6 z-10">
        <div class="flex justify-between items-start">
          <div class="flex items-start space-x-3">
            <img src="img/icplogo.png" alt="Icplogo" class="h-12 w-12 object-contain">
            <div>
              <h3 class="text-[#002D62] text-lg font-bold">About</h3>
              <p class="text-sm text-gray-700 mt-1">Digital Signature verifier for admissions office — Ibadan City Polytechnic. This tool assists admissions staff to verify handwritten signatures on documents using AI-assisted forensic analysis and stores scan history for audit.</p>
            </div>
          </div>
          <button id="closeAboutBtn" class="ml-3 text-gray-500 hover:text-gray-700" aria-label="Close about dialog">✕</button>
        </div>

        <ul class="mt-4 text-sm text-gray-700 space-y-2">
          <li><strong>Purpose:</strong> Forensic-level signature comparison for admissions verification.</li>
          <li><strong>Creator:</strong> Akinlabi Funmilayo Hannah — Matric No: <span class="font-mono">CSH24R007</span></li>
          <li><strong>Maintained by:</strong> Admissions Office, Ibadan City Polytechnic</li>
          <li><strong>Contact:</strong> <a href="mailto:admissions@ibadanpoly.edu.ng" class="text-[#002D62]">admissions@ibadanpoly.edu.ng</a></li>
          <li><strong>Version:</strong> 1.0</li>
        </ul>
      </div>
    </div>

    <!-- History below scanner (full width) -->
  <section class="bg-white p-4 md:p-6 rounded-2xl shadow border border-gray-200">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-lg font-bold">Your Scan History</h3>
        <button id="deleteAllBtn" class="px-3 py-2 bg-gray-700 text-white rounded-md">Delete All</button>
      </div>
      <ul id="historyList" class="space-y-3 text-sm text-gray-700 max-h-96 overflow-auto"></ul>
    </section>

  </main>
  <script type="module" src="js/main.js"></script>
  <script type="module" src="js/scanner.js"></script>
  <script>
    // About modal handlers
    (function(){
      const aboutBtn = document.getElementById('aboutBtn');
      const aboutModal = document.getElementById('aboutModal');
      const aboutBackdrop = document.getElementById('aboutBackdrop');
      const closeAboutBtn = document.getElementById('closeAboutBtn');

      function openModal() { aboutModal.classList.remove('hidden'); document.body.style.overflow = 'hidden'; }
      function closeModal() { aboutModal.classList.add('hidden'); document.body.style.overflow = ''; }

      if (aboutBtn) aboutBtn.addEventListener('click', openModal);
      if (closeAboutBtn) closeAboutBtn.addEventListener('click', closeModal);
      if (aboutBackdrop) aboutBackdrop.addEventListener('click', closeModal);
      document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeModal(); });
    })();
  </script>
</body>
</html>
